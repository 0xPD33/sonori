# =============================================================================
# Sonori Configuration
# =============================================================================
# Most settings have good defaults. See CONFIGURATION.md for detailed docs.
# Quick examples: Fast (base.en), Balanced (small.en), Quality (large-v3-turbo)

[general_config]
model = "small.en"                     # Model: tiny, base, small, medium, large-v3-turbo
language = "en"                        # Language code (or "auto" for detection)
transcription_mode = "manual"          # "realtime" or "manual"

# =============================================================================
# BACKEND
# =============================================================================

[backend_config]
backend = "whisper_cpp"                # Options: ctranslate2, whisper_cpp, moonshine
threads = 4                            # CPU threads (default: min(num_cpus, 4))
gpu_enabled = true                     # GPU acceleration (CUDA/Metal/Vulkan)
quantization_level = "medium"          # Precision: high, medium, low

# =============================================================================
# AUDIO & TRANSCRIPTION MODES
# =============================================================================

[audio_processor_config]
buffer_size = 1024                     # Audio buffer size (sample rate hardcoded to 16000 Hz)

[realtime_mode_config]
max_buffer_duration_sec = 30.0
max_segment_count = 20

[manual_mode_config]
max_recording_duration_secs = 120
clear_on_new_session = true
chunk_duration_seconds = 29.0          # 29s avoids Whisper token limit at 30s boundary
enable_chunk_overlap = true
chunk_overlap_seconds = 2.0
disable_chunking = false

# =============================================================================
# VOICE ACTIVITY DETECTION
# =============================================================================

[vad_config]
sensitivity = "Medium"                 # Low, Medium, High
hangbefore_frames = 5                  # Frames before confirming speech (1 frame = 10ms)
hangover_frames = 30                   # Frames after speech ends before cutting
silence_tolerance_frames = 8           # Silence tolerance during speech
speech_prob_smoothing = 0.3            # EMA smoothing factor

# =============================================================================
# SOUND
# =============================================================================

[sound_config]
enabled = true
volume = 0.5

# =============================================================================
# TRANSCRIPTION OPTIONS
# =============================================================================

[common_transcription_options]
beam_size = 5
patience = 1.0

[ctranslate2_options]
repetition_penalty = 1.25

[whisper_cpp_options]
temperature = 0.2
suppress_blank = true
no_context = true
max_tokens = 0

[moonshine_options]
enable_cache = false

# =============================================================================
# POST-PROCESSING
# =============================================================================

[post_process_config]
enabled = true
remove_leading_dashes = true
remove_trailing_dashes = true
normalize_whitespace = true

# =============================================================================
# SYSTEM INTEGRATION
# =============================================================================

[portal_config]
enable_xdg_portal = true
enable_global_shortcuts = true
manual_toggle_accelerator = "<Super>backslash"
paste_shortcut = "ctrl_shift_v"        # ctrl_shift_v (terminals) or ctrl_v (apps)

# =============================================================================
# DISPLAY & WINDOW
# =============================================================================

[display_config]
vsync_mode = "Enabled"                 # Auto, Enabled, Adaptive, Disabled, Mailbox
target_fps = 60
window_position = "BottomCenter"       # BottomCenter, TopCenter, MiddleCenter, etc.

[window_behavior_config]
show_in_system_tray = true

# =============================================================================
# DEBUGGING
# =============================================================================
# See CONFIGURATION.md for details on these options

[debug_config]
log_stats_enabled = false
save_manual_audio_debug = false
recording_dir = "recordings"
