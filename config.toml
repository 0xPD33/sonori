# =============================================================================
# CORE TRANSCRIPTION SETTINGS
# =============================================================================
# These are the most important settings you'll likely want to change

[general_config]
model = "small.en"                     # Whisper model size (tiny, base, small, medium, large, large-v2, large-v3, large-v3-turbo)
                                        # Most users can stick with "base.en" or "small.en" for good performance
language = "en"                        # Transcription language (use "auto" for auto-detect)
                                        # Change this if you speak a different language
transcription_mode = "manual"          # "realtime" for live transcription, "manual" for push-to-talk
                                        # Real-time: transcribes as you speak (more resource intensive)
                                        # Manual: record chunks, then transcribe (better for longer speech)

# =============================================================================
# BACKEND CONFIGURATION
# =============================================================================
# Choose the transcription engine and configure its performance

[backend_config]
backend = "whisper_cpp"                # Options: "ctranslate2", "whisper_cpp", "parakeet"
                                        # whisper_cpp is recommended for most users (better performance)
threads = 4                           # Number of CPU threads (default: min(num_cpus, 4))
                                        # Most users can keep this default - will auto-adjust to your CPU
gpu_enabled = true                    # Enable GPU acceleration (CUDA/Metal/Vulkan)
                                        # Enable if you have a decent GPU, disable for CPU-only or issues
quantization_level = "medium"         # Precision: "high" (full), "medium" (q8_0), "low" (q5_1)
                                        # Medium is good balance - high for max accuracy, low for less memory

# =============================================================================
# AUDIO PROCESSING
# =============================================================================
# Configure how audio is captured and processed

[audio_processor_config]
sample_rate = 16000                   # Audio sample rate in Hz (must be 8000 or 16000 for VAD)
                                        # Most users can keep this default - required by VAD
buffer_size = 1024                    # Audio buffer size (also used for visualization)
                                        # Keep this default unless you're experiencing performance issues

# =============================================================================
# TRANSCRIPTION MODE SETTINGS
# =============================================================================
# Configure real-time and manual transcription modes

[realtime_mode_config]
max_buffer_duration_sec = 30.0        # Maximum audio buffer duration for VAD history (seconds)
                                        # Most users can keep this default
max_segment_count = 20                # Maximum number of speech segments to buffer
                                        # Keep this default unless you need very long continuous transcription

[manual_mode_config]
max_recording_duration_secs = 120     # Maximum recording time per session (2 minutes)
                                        # Adjust if you need longer recordings
clear_on_new_session = true           # Clear transcript when starting new session
                                        # Personal preference - false to accumulate transcriptions
chunk_duration_seconds = 29.0         # Chunk size in seconds (see CONFIGURATION.md for why 29s vs 30s)
                                        # Keep this default to avoid Whisper's 30-second boundary issues
enable_chunk_overlap = true           # Enable overlap between chunks (prevents word cutoff)
                                        # Keep enabled unless you experience repetition issues
chunk_overlap_seconds = 2.0           # Overlap duration in seconds
                                        # Most users can keep this default - prevents word cutoff at boundaries
disable_chunking = false              # EXPERIMENTAL: Process entire recording as single segment (no chunk limit)
                                        # Leave false unless you're experimenting with very long recordings

[vad_config]
threshold = 0.10                      # Speech detection sensitivity (0.0-1.0, lower = more sensitive)
                                        # Most users can keep this default - adjust if it's missing speech or triggering too easily
speech_end_threshold = 0.08           # Lower threshold for speech continuation (hysteresis)
                                        # Keep this default - helps prevent speech from cutting off mid-sentence
hangbefore_frames = 5                 # Frames to wait before confirming speech start (1 frame = 10ms)
                                        # Keep this default - prevents false positives from sudden noises
hangover_frames = 30                  # Frames to wait after speech ends before cutting (1 frame = 10ms)
                                        # Keep this default - prevents speech from cutting off during short pauses
silence_tolerance_frames = 8          # Frames of silence to tolerate during speech (1 frame = 10ms)
                                        # Keep this default - allows for natural pauses in speech
speech_prob_smoothing = 0.3           # Exponential moving average smoothing factor
                                        # Keep this default - smooths out detection to prevent jittery behavior

[sound_config]
enabled = true                        # Enable sound feedback
                                        # Personal preference - disable if you don't want audio cues
volume = 0.5                         # Sound volume (0.0-1.0)
                                        # Adjust to your preferred volume level

# =============================================================================
# TRANSCRIPTION OPTIONS
# =============================================================================
# Configure transcription behavior

# Common options shared across all backends
[common_transcription_options]
beam_size = 5                         # Beam search width (1 = greedy/fastest, higher = more accurate but slower)
                                        # Most users can keep this default - higher values may be more accurate but slower
patience = 1.0                        # Beam search patience factor
                                        # Keep this default - helps with complex speech patterns

# CTranslate2-specific options (used when backend = "ctranslate2")
[ctranslate2_options]
repetition_penalty = 1.25             # Penalty for repeated tokens
                                        # Keep this default unless you're experiencing repeated words or phrases

# Whisper.cpp-specific options (used when backend = "whisper_cpp")
[whisper_cpp_options]
temperature = 0.2                     # Sampling temperature (0.0 = deterministic, higher = more creative)
                                        # Keep this default - higher values may be more creative but less accurate
suppress_blank = true                 # Suppress blank outputs at beginning
                                        # Keep this default - prevents empty transcriptions
no_context = true                     # Disable context
                                        # Keep this default - prevents double transcriptions in real-time mode
max_tokens = 0                        # Maximum tokens per segment (0 = auto)
                                        # Keep this default - automatically determined by model
entropy_thold = 2.4                   # Entropy threshold for fallback sampling
                                        # Keep this default - helps with difficult speech segments
logprob_thold = -1.0                  # Log probability threshold for speech detection
                                        # Keep this default - helps filter out non-speech
no_speech_thold = 0.6                 # No-speech probability threshold
                                        # Keep this default - helps distinguish speech from silence

# =============================================================================
# USER INTERFACE & CONTROLS
# =============================================================================
# Configure display and window behavior

[display_config]
vsync_mode = "Enabled"                # VSync: "Auto", "Enabled", "Adaptive", "Disabled", "Mailbox"
                                        # Keep "Enabled" unless you're experiencing tearing or performance issues
target_fps = 60                       # Target FPS when vsync is disabled
                                        # Keep this default - higher values use more CPU for minimal benefit
window_position = "BottomCenter"      # Window position on screen
                                        # Available: BottomLeft, BottomCenter, BottomRight,
                                        #            TopLeft, TopCenter, TopRight,
                                        #            MiddleLeft, MiddleCenter, MiddleRight
                                        # Change this to position the window where you want it

[window_behavior_config]
show_in_system_tray = true            # Show icon in system tray
                                        # Personal preference - disable if you don't use system tray

# =============================================================================
# SYSTEM INTEGRATION
# =============================================================================
# Configure desktop environment integration and global shortcuts

[portal_config]
enable_xdg_portal = true              # Enable XDG Desktop Portal for input injection
                                        # Keep enabled unless you're having issues with paste functionality
enable_global_shortcuts = true        # Enable global shortcuts via desktop portal
                                        # Keep enabled for global hotkeys, disable if not working or not needed
manual_toggle_accelerator = "<Super>backslash"  # Global hotkey for manual mode toggle
                                        # Change this if Super+backslash conflicts with other apps
application_id = "dev.sonori"   # Application ID for desktop portal registration
                                        # Keep this default unless you're developing your own fork
paste_shortcut = "ctrl_shift_v"       # Paste method: "ctrl_shift_v" (terminals) or "ctrl_v" (apps)
                                        # Change to "ctrl_v" if you're mostly using regular applications

# =============================================================================
# TRANSCRIPTION POST-PROCESSING
# =============================================================================
# Clean up transcription artifacts and normalize output

[post_process_config]
enabled = true                        # Enable post-processing of transcriptions
                                        # Keep enabled - cleans up transcription artifacts
remove_leading_dashes = true          # Remove leading dashes (e.g., "- text" → "text")
                                        # Keep enabled - removes common transcription artifacts
remove_trailing_dashes = true         # Remove trailing dashes (e.g., "text -" → "text")
                                        # Keep enabled - removes common transcription artifacts
normalize_whitespace = true           # Normalize whitespace (collapse multiple spaces, etc.)
                                        # Keep enabled - makes output more readable

# =============================================================================
# DEBUGGING & DEVELOPMENT
# =============================================================================
# Advanced options for debugging and performance monitoring

[debug_config]
log_stats_enabled = false             # Enable detailed performance logging
                                        # Keep disabled unless you're troubleshooting performance issues
save_manual_audio_debug = false       # Save manual mode audio to WAV files for debugging
                                        # Keep enabled - useful for debugging transcription issues
recording_dir = "recordings"          # Directory to save debug recordings
                                        # Keep this default unless you prefer a different location

# =============================================================================
# NEED HELP CONFIGURING?
# =============================================================================
# See CONFIGURATION.md for common configurations and examples
# Most users only need to change 2-3 settings from the defaults above

# =============================================================================
# MODEL INFORMATION
# =============================================================================
# Available models: tiny, tiny.en, base, base.en, small, small.en, medium, large-v1, large-v2, large-v3
#
# Intelligent mapping for CTranslate2:
#   - tiny, base → openai/whisper-* (standard OpenAI models, already fast)
#   - small, medium, large → distil-whisper/* (distilled models for speed optimization)
#   Examples:
#     "base.en" → "openai/whisper-base.en"
#     "small.en" → "distil-whisper/distil-small.en"
#     "medium" → "distil-whisper/distil-medium.en"
#
# Whisper.cpp always uses standard OpenAI models (e.g., "base.en" → "base.en")
# You can also specify full model paths to bypass mapping: "distil-whisper/distil-small.en"
